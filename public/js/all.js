var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Confirmation=function(){function t(t,e){n.data("form-id","#"+t.attr("id")),n.data("callback-function",function(t,a){var r=a.responseJSON;422===a.status?Utility.displayErrorMessageBox(Object.values(r).join("<br>")):!0===r.success?(Utility.displaySuccessMessageBox(r.message),e.submit()):Utility.displayErrorMessageBox(r.message)}),r.html(t.data("deletion-confirmation-message")+t.data("info")+"?"),a.foundation("open")}function e(){n.click(function(t){t.preventDefault(),a.foundation("close"),Utility.submitForm($(n.data("form-id")),n.data("callback-function"))})}var a=$("#confirmation-box"),r=$("#confirmation-text"),n=$("#yes-answer");return{confirmToDelete:t,initialize:e}}(jQuery),Form=function(){function t(){e.submit(function(t){t.preventDefault(),Utility.submitForm($(this))}),Search.SearchForm.submit(function(t){t.preventDefault(),Search.submitForm($(this))}),Search.ResultDiv.on("submit",".deletion",function(t){t.preventDefault(),Confirmation.confirmToDelete($(this),Search.SearchForm)})}var e=$(".submission-form");return{initialize:t}}(jQuery),Menu=function(){function t(){$(".menu li.active.is-submenu-item").parent().parents().each(function(t,e){$(e).is("li")&&$(e).addClass("active")})}return{initialize:t}}(jQuery),Search=function(){function t(t){r.removeClass("alert"),$.ajax({url:t.attr("action"),method:t.attr("method"),data:Utility.getFormData(t),cache:!1,contentType:!1,processData:!1,dataType:"html",success:function(t){Utility.clearErrors(),r.html(t)},error:function(t,e,a){422===t.status?(Utility.displayInvalidInputs(JSON.parse(t.responseText)),r.html("")):r.html(Translator.translate("utility.result.error")+" "+a).addClass("alert")}})}function e(){r.on("click",".pagination a",function(e){e.preventDefault();var a=document.createElement("form");a.setAttribute("method","GET"),a.setAttribute("action",$(this).attr("href")),t($(a))})}function a(){e()}var r=$("#search-result"),n=$("#search-form");return{ResultDiv:r,SearchForm:n,initialize:a,submitForm:t}}(jQuery),Translator=function(){function t(){$.holdReady(!0);var t=[];Laravel.languageCodes.forEach(function(e){t.push($.getJSON("/languages/"+e+".json",{timestamp:Date.now()}))}),$.when.apply(this,t).then(function(){for(var t=0;t<arguments.length;t++)a.add({language:Laravel.languageCodes[t],data:arguments[t][0]});a.useLanguage(Laravel.currentLanguage)},function(){Utility.displayErrorMessageBox("Error! Failed to load some translation files, please contact the system administrator.")}).always(function(){$.holdReady(!1)})}function e(t){return a.translate(t)}var a=JSTranslate.i18n({language:Laravel.languageCodes,defaultLanguage:Laravel.defaultLanguage});return{initialize:t,translate:e}}(jQuery),Utility=function(){function t(t,e){r(),m.html(t),m.hasClass("alert")?e||(f.html(Translator.translate("utility.result.success")),m.removeClass("alert")):e&&(f.html(Translator.translate("utility.result.error")),m.addClass("alert")),c.foundation("open")}function e(e){t(e,!1)}function a(e){t(e,!0)}function r(){$("form").children().removeClass("error"),$(".help-text").addClass("hide")}function n(t){if(r(),t.hasOwnProperty("errors"))for(name in t.errors){var e=t.errors[name],a=$("[name="+name+"]").attr("id"),n="object"===(void 0===e?"undefined":_typeof(e))?e[0]:e;if(a)$("#"+a).addClass("error"),$("#"+a+"-help-text").text(n).removeClass("hide");else{var i=$('[name="'+name+'[]"]').parent("fieldset").attr("id");$("#"+i+"-help-text").text(n).removeClass("hide")}}}function i(t,e){r();var n="<h5>"+Translator.translate("utility.calling_system_administrator")+"</h5>";n+="<strong>"+Translator.translate("utility.error_url")+"</strong> "+e+"<br>",n+="<strong>"+Translator.translate("utility.error_status_code")+"</strong> "+t.status+"<br>",n+="<strong>"+Translator.translate("utility.error_status_text")+"</strong> "+t.statusText+"<br>",a(n)}function o(t,r){var i=r.responseJSON;-1!==$.inArray(r.status,[422,423])?n(i):!0===i.success?i.hasOwnProperty("message")?(c.on("closed.zf.reveal",function(){i.redirectedUrl?location.href=i.redirectedUrl:t.trigger("reset")}),e(i.message)):i.redirectedUrl&&(location.href=i.redirectedUrl):a(i.message)}function s(t,e,a){e.hasOwnProperty("responseJSON")?"function"==typeof a?a.apply(this,[t,e]):o(t,e):i(e,t.attr("action"))}function l(t){return"GET"===t.attr("method")?t.serialize():new FormData(t[0])}function u(t,e){$.ajax({url:t.attr("action"),method:t.attr("method"),data:l(t),cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a,r,n){s(t,n,e)},error:function(a){s(t,a,e)}})}var c=$("#result-box"),f=$("#result-title"),m=$("#result-text");return{submitForm:u,displaySuccessMessageBox:e,displayErrorMessageBox:a,displayInvalidInputs:n,displayUnexpectedError:i,clearErrors:r,getFormData:l}}(jQuery),SpinnerSelector=$("#spinner, #spinner-popup");Translator.initialize(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ajaxStart(function(){SpinnerSelector.show()}).ajaxComplete(function(){SpinnerSelector.hide()}).ready(function(){Menu.initialize(),Search.initialize(),Confirmation.initialize(),Form.initialize(),ReportMenu.initialize()});